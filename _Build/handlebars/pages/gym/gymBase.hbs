{{> header header--text=(findObjectInArray object="gym" in=@root.global.navigation key="url" value="name")}}

{{> banner title="Gym" content="Please don't contact me in regards to any WSM competitions, im busy"}}

<main class="container">
	<div class="innerContainer ut-padding ut-mobileFullChildren">

		<div class="fifth">
			<ul class="d3__list--workouts">
			</ul>
		</div>

		<div class="fourFifths ut-vertAlignTop last">
			<table class="siteStatus table__responsive d3-exercise">
			</table>
		</div>

		<div class="twoThirds">
			<div class="delta">
				<svg class="chart"></svg>
			</div>
		</div>

		<div class="third last ut-vertAlignTop">
			<div class="ut-padding ut-marginBottom">
				<select class="full js-chartSelect">
					{{#each index.charts}}
						<option>{{name}}</option>
					{{/each}}
				</select>
			</div>
			<div class="key">
			</div>
		</div>
	</div>
</main>

<script type="text/javascript">
	function pageJS(){
		chartManager.init(function(){
			var gym = Gym(chartManager.all);
			var chest = Gym(chartManager.chest);

			chartManager.htmlList('.d3__list--workouts', gym.date(true));

			chartManager.htmlWorkout('.d3-exercise', gym.last());

			Line('.chart').data([
					{
                        "id": 'sdfg',
                        "value": 50,
                        "label": ""
                    }
				])
				.render();

			document.querySelector('.d3__list--workouts').onclick = function(e){
		    	chartManager.htmlWorkout('.d3-exercise', gym.workout(e.target.innerHTML));
		    	this.querySelector('.externalLink').classList.remove('externalLink');
		    	e.target.classList.add('externalLink');
		    };
		});
        //chartManager.update();
        
		document.querySelector('.js-chartSelect').onchange = function(){
	    	chartManager.chartIndex = this.selectedIndex;
	    	chartManager.update();
	    };
	}
</script>